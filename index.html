<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />

	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

	<link rel="stylesheet" type="text/css" href="./css/reset.css" />
	<link rel="stylesheet" type="text/css" href="./css/style.css" />
	<link rel="stylesheet" type="text/css" href="./css/animations.css" />

	<script type="text/javascript" src="./js/ui_builder.js"></script>
	<script type="text/javascript" src="./js/states.js"></script>
	<script type="text/javascript" src="./js/menu.js"></script>
	<script type="text/javascript" src="./js/code.js"></script>

	<title>Hashi - Mastering the japanese dinner</title>

</head>
<body class="select">
<div id="fullpage" class="layout">
	<div id="header">
		<img id="logo" src="./img/Logo_Hashi.png"/>
		<ul id="menuItems">
			<li><a href="#"  onclick="simulatorLink()">Simulador</a></li>
			<li><a href="#" onclick="codeLink()">Códigos</a></li>
			<li><a href="#" onclick="aboutLink()">Sobre</a></li>
		</ul>
		<ul id="langMenu">
			<li><img id="eng" class="lang_img" src="./img/Ingles.png"/></li>
			<li><img id="pt-br" class="lang_img" src="./img/Port.png"/></li>
		</ul>
		<br style="clear: both;"/>
	</div>
	<div id="content">

		<div id="about"></div>
		<div id="code">
			<div id="code_error" class="content_menu">
<pre>
#define N 5<br />
void philosopher(int i)
{
	while(TRUE){
		think();
		take_fork(i);
		take_fork((i+1) % N);
		eat();
		put_fork(i);
		put_fork((i+1) % N);
	}
}
</pre>
			</div>
			<center>Solução errada usada na primeira simulação.</center>

			<div id="code_correct" class="content_menu">
<pre>
#define N 	 5
#define LEFT	 (i+N-1)%N 
#define RIGHT 	 (i+1)%N
#define THINKING 0
#define HUNGRY 	 1
#define EATING 	 2
typedef int semaphore;
int state[N];
semaphore mutex = 1;
semaphore s[N];

void philosopher(int i)
{
	while(TRUE){
		think();
		take_forks(i);
		eat();
		put_forks(i);
	}
}

void take_forks(int i)
{
	down(&mutex);
	state[i] = HUNGRY;
	test(i);
	up(&mutex);
	down(&s[i]);
}

void put_forks(i)
{
	down(&mutex);
	state[i] = HUNGRY;
	test(LEFT);
	test(RIGHT);
	up(&mutex);
}
void test(i)
{
	if(state[i]==HUNGRY && state[LEFT] != EATING && state[RIGHT] != EATING)
	{
		state[i] = EATING;
		up(&s[i]);
	}	
}
</pre>

			</div>
			<center>Solução certa usada na segunda simulação.</center>
		</div>

		<div id="cover" class="cover">
			<div id="coverText" class="cover"></div>
		</div>
		<img id="intro" src="./img/Intro.png" />
		<div id="play" class="select" onClick="next()"></div>

		<div id="philosophers">
			<img id="phi1_t" class="philosopher thinking phi1" src="./img/Filosofo_Pensando.png" />
			<img id="phi2_t" class="philosopher thinking phi2" src="./img/Filosofo_Pensando.png" />
			<img id="phi3_t" class="philosopher thinking phi3" src="./img/Filosofo_Pensando.png" />
			<img id="phi4_t" class="philosopher thinking phi4" src="./img/Filosofo_Pensando.png" />
			<img id="phi5_t" class="philosopher thinking phi5" src="./img/Filosofo_Pensando.png" />

			<img id="phi1_h" class="philosopher hungry phi1" src="./img/Filosofo_ComFome.png" />
			<img id="phi2_h" class="philosopher hungry phi2" src="./img/Filosofo_ComFome.png" />
			<img id="phi3_h" class="philosopher hungry phi3" src="./img/Filosofo_ComFome.png" />
			<img id="phi4_h" class="philosopher hungry phi4" src="./img/Filosofo_ComFome.png" />
			<img id="phi5_h" class="philosopher hungry phi5" src="./img/Filosofo_ComFome.png" />

			<img id="phi1_e" class="philosopher eating phi1" src="./img/Filosofo_Comendo.png" />
			<img id="phi2_e" class="philosopher eating phi2" src="./img/Filosofo_Comendo.png" />
			<img id="phi3_e" class="philosopher eating phi3" src="./img/Filosofo_Comendo.png" />
			<img id="phi4_e" class="philosopher eating phi4" src="./img/Filosofo_Comendo.png" />
			<img id="phi5_e" class="philosopher eating phi5" src="./img/Filosofo_Comendo.png" />
		</div>

		<div id="hands">
			<div id="rhand1" class="right hand phi1" onclick=""></div>
			<div id="rhand2" class="right hand phi2" onclick=""></div>
			<div id="rhand3" class="right hand phi3" onclick=""></div>
			<div id="rhand4" class="right hand phi4" onclick=""></div>
			<div id="rhand5" class="right hand phi5" onclick=""></div>

			<div id="lhand1" class="left hand phi1" onclick=""></div>
			<div id="lhand2" class="left hand phi2" onclick=""></div>
			<div id="lhand3" class="left hand phi3" onclick=""></div>
			<div id="lhand4" class="left hand phi4" onclick=""></div>
			<div id="lhand5" class="left hand phi5" onclick=""></div>
		</div>

		<div id="tb1"  class="tableware">
			<img id="ds1" class="dish empty" src="./img/Prato.png" />
			<img id="ds1_sp" class="dish sp" src="./img/Espaguete.png" />
			<img id="ds1_sushi" class="dish sushi" src="./img/Sushi.png" />
			<img id="hs1" class="hashi" src="./img/Hashi.png" />
		</div>
		<div id="tb2"  class="tableware">
			<img id="ds2" class="dish" src="./img/Prato.png" />
			<img id="ds2_sp" class="dish sp" src="./img/Espaguete.png" />
			<img id="ds2_sushi" class="dish sushi" src="./img/Sushi.png" />
			<img id="hs2" class="hashi" src="./img/Hashi.png" />
		</div>
		<div id="tb3"  class="tableware">
			<img id="ds3" class="dish" src="./img/Prato.png" />
			<img id="ds3_sp" class="dish sp" src="./img/Espaguete.png" />
			<img id="ds3_sushi" class="dish sushi" src="./img/Sushi.png" />
			<img id="hs3" class="hashi" src="./img/Hashi.png" />
		</div>
		<div id="tb4"  class="tableware">
			<img id="ds4" class="dish" src="./img/Prato.png" />
			<img id="ds4_sp" class="dish sp" src="./img/Espaguete.png" />
			<img id="ds4_sushi" class="dish sushi" src="./img/Sushi.png" />
			<img id="hs4" class="hashi" src="./img/Hashi.png" />
		</div>
		<div id="tb5"  class="tableware">
			<img id="ds5" class="dish" src="./img/Prato.png" />
			<img id="ds5_sp" class="dish sp" src="./img/Espaguete.png" />
			<img id="ds5_sushi" class="dish sushi" src="./img/Sushi.png" />
			<img id="hs5" class="hashi" src="./img/Hashi.png" />
		</div>

		<img id="table" src="./img/Mesa.png" />
		<div id="death">
			<img class="death" 	src="./img/Morte.png" />
			<img class="death"  src="./img/Filosofo_ComFome.png" />
			<img class="death"  src="./img/Filosofo_ComFome.png" />
			<img class="death"  src="./img/Filosofo_ComFome.png" />
			<img class="death"  src="./img/Filosofo_ComFome.png" />
			<img class="death"  src="./img/Filosofo_ComFome.png" />
		</div>

		<div id="prev" class="sim_nav select"></div>
		<div id="next" class="sim_nav select"></div>
	</div>

</div>
</body>
</html>
